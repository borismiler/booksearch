{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Form,FormControl,Container,Row,Col,Card,ToggleButton,ToggleButtonGroup}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookSearch=()=>{const[query,setQuery]=useState('');const[books,setBooks]=useState([]);const[sortByYear,setSortByYear]=useState(false);useEffect(()=>{const fetchBooks=async()=>{if(query.length<3)return;try{const response=await axios.get(\"https://openlibrary.org/search.json?q=\".concat(query));setBooks(response.data.docs);}catch(error){console.error('Error fetching books:',error);}};const debounceFetchBooks=setTimeout(fetchBooks,500);return()=>clearTimeout(debounceFetchBooks);},[query]);const sortedBooks=[...books].sort((a,b)=>{if(sortByYear){return(a.first_publish_year||0)-(b.first_publish_year||0);}return 0;// Default to relevance sorting\n});return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Form,{className:\"my-4\",children:/*#__PURE__*/_jsx(FormControl,{type:\"text\",placeholder:\"Search for a book\",value:query,onChange:e=>setQuery(e.target.value)})}),/*#__PURE__*/_jsxs(ToggleButtonGroup,{type:\"radio\",name:\"sortOptions\",defaultValue:false,onChange:value=>setSortByYear(value),children:[/*#__PURE__*/_jsx(ToggleButton,{value:0,id:'relevanceBtn',children:\"Relevance\"}),/*#__PURE__*/_jsx(ToggleButton,{value:1,id:'yearBtn',children:\"Year\"})]}),/*#__PURE__*/_jsx(Row,{children:sortedBooks.map((book,index)=>{var _book$author_name,_book$isbn;return/*#__PURE__*/_jsx(Col,{sm:12,md:6,lg:4,children:/*#__PURE__*/_jsx(Card,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:book.title}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Author(s):\"}),\" \",((_book$author_name=book.author_name)===null||_book$author_name===void 0?void 0:_book$author_name.join(', '))||'N/A',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Year:\"}),\" \",book.first_publish_year||'N/A',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"ISBN:\"}),\" \",((_book$isbn=book.isbn)===null||_book$isbn===void 0?void 0:_book$isbn[0])||'N/A',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Pages:\"}),\" \",book.number_of_pages_median||'N/A']})]})})},index);})})]});};export default BookSearch;","map":{"version":3,"names":["React","useState","useEffect","axios","Form","FormControl","Container","Row","Col","Card","ToggleButton","ToggleButtonGroup","jsx","_jsx","jsxs","_jsxs","BookSearch","query","setQuery","books","setBooks","sortByYear","setSortByYear","fetchBooks","length","response","get","concat","data","docs","error","console","debounceFetchBooks","setTimeout","clearTimeout","sortedBooks","sort","a","b","first_publish_year","children","className","type","placeholder","value","onChange","e","target","name","defaultValue","id","map","book","index","_book$author_name","_book$isbn","sm","md","lg","Body","Title","title","Text","author_name","join","isbn","number_of_pages_median"],"sources":["C:/Users/Boris/Desktop/fpl/book-proj/src/BookSearch.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Form, FormControl, Container, Row, Col, Card, ToggleButton, ToggleButtonGroup } from 'react-bootstrap';\r\n\r\ntype Book = {\r\n    title: string;\r\n    author_name?: string[];\r\n    first_publish_year?: number;\r\n    isbn?: string[];\r\n    number_of_pages_median?: number;\r\n};\r\n\r\nconst BookSearch: React.FC = () => {\r\n    const [query, setQuery] = useState('');\r\n    const [books, setBooks] = useState<Book[]>([]);\r\n    const [sortByYear, setSortByYear] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchBooks = async () => {\r\n            if (query.length < 3) return;\r\n            try {\r\n                const response = await axios.get(`https://openlibrary.org/search.json?q=${query}`);\r\n                setBooks(response.data.docs);\r\n            } catch (error) {\r\n                console.error('Error fetching books:', error);\r\n            }\r\n        };\r\n\r\n        const debounceFetchBooks = setTimeout(fetchBooks, 500);\r\n        return () => clearTimeout(debounceFetchBooks);\r\n    }, [query]);\r\n\r\n    const sortedBooks = [...books].sort((a, b) => {\r\n        if (sortByYear) {\r\n            return (a.first_publish_year || 0) - (b.first_publish_year || 0);\r\n        }\r\n        return 0; // Default to relevance sorting\r\n    });\r\n\r\n    return (\r\n        <Container>\r\n            <Form className=\"my-4\">\r\n                <FormControl\r\n                    type=\"text\"\r\n                    placeholder=\"Search for a book\"\r\n                    value={query}\r\n                    onChange={(e) => setQuery(e.target.value)}\r\n                />\r\n            </Form>\r\n            <ToggleButtonGroup\r\n                type=\"radio\"\r\n                name=\"sortOptions\"\r\n                defaultValue={false}\r\n                onChange={(value) => setSortByYear(value)}\r\n            >\r\n                <ToggleButton value={0} id={'relevanceBtn'}>Relevance</ToggleButton>\r\n                <ToggleButton value={1} id={'yearBtn'}>Year</ToggleButton>\r\n            </ToggleButtonGroup>\r\n            <Row>\r\n                {sortedBooks.map((book, index) => (\r\n                    <Col key={index} sm={12} md={6} lg={4}>\r\n                        <Card className=\"mb-4\">\r\n                            <Card.Body>\r\n                                <Card.Title>{book.title}</Card.Title>\r\n                                <Card.Text>\r\n                                    <strong>Author(s):</strong> {book.author_name?.join(', ') || 'N/A'}<br />\r\n                                    <strong>Year:</strong> {book.first_publish_year || 'N/A'}<br />\r\n                                    <strong>ISBN:</strong> {book.isbn?.[0] || 'N/A'}<br />\r\n                                    <strong>Pages:</strong> {book.number_of_pages_median || 'N/A'}\r\n                                </Card.Text>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                ))}\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default BookSearch;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}